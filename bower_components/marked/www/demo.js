$(function(){var e=$("#input"),n=$("#outputType"),r=$("#preview"),a=$("#html"),t=$("#lexer"),l=($("#syntax"),!0),o=null;top.document.location.href.match(/\?blank=1$/)&&e.val(""),n.change(function(){$("#rightContainer .pane").hide(),o=$("#"+n.val()).show()}).change();var c=function(){l=!0};e.change(c).keyup(c).keypress(c).keydown(c);var i=function(e){return'"'+(e+"").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\f/g,"\\f").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")+'"'},u=function(){var e=o[0];return e.scrollHeight-e.clientHeight},p=function(){var e=u();return e<=0?1:o.scrollTop()/e},v=function(e){o.scrollTop(e*u())},h=1,f=function(){if(l){l=!1;for(var n=new Date,o=p(),c=e.val(),u=marked.lexer(c),g=[],s=0;s<u.length;s++){var $=[];for(var m in u[s])$.push(m+":"+i(u[s][m]));g.push("{"+$.join(", ")+"}")}var w=marked.parser(u);r.html(w),a.val(w),t.val(g.join("\n")),v(o);var d=new Date;h=d-n,h<50?h=50:h>500&&(h=1e3)}window.setTimeout(f,h)};f(),v(0)});